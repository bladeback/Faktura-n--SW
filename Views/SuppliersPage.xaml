<UserControl x:Class="InvoiceApp.Views.SuppliersPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">
    <UserControl.Resources>
        <!-- styl tlačítek na liště -->
        <Style x:Key="ToolbarButton"
               TargetType="Button">
            <Setter Property="Margin"
                    Value="8,0,0,0"/>
            <Setter Property="Padding"
                    Value="12,6"/>
            <Setter Property="MinWidth"
                    Value="80"/>
        </Style>

        <!-- hlavička tabulky -->
        <Style TargetType="DataGridColumnHeader">
            <Setter Property="Background"
                    Value="#F3F4F6"/>
            <Setter Property="BorderBrush"
                    Value="#E5E7EB"/>
            <Setter Property="BorderThickness"
                    Value="0,0,1,1"/>
            <Setter Property="FontWeight"
                    Value="SemiBold"/>
            <Setter Property="Padding"
                    Value="8,6"/>
        </Style>
        <!-- řádky -->
        <Style TargetType="DataGridRow">
            <Setter Property="Height"
                    Value="28"/>
        </Style>
    </UserControl.Resources>

    <Grid Margin="16">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <!-- horní lišta -->
        <DockPanel Grid.Row="0"
                   LastChildFill="False"
                   Margin="0,0,0,10">
            <TextBox x:Name="SearchBox"
                     Width="220"
                     Height="28"
                     VerticalAlignment="Center"
                     Padding="8,4"
                     TextChanged="SearchBox_TextChanged"
                     ToolTip="Hledej podle názvu nebo IČO"
                     DockPanel.Dock="Left"/>
            <TextBlock Text="Dodavatelé"
                       FontSize="20"
                       FontWeight="Bold"
                       Margin="10,0,0,0"
                       VerticalAlignment="Center"
                       DockPanel.Dock="Left"/>
            <StackPanel Orientation="Horizontal"
                        DockPanel.Dock="Right">
                <Button Content="Přidat"
                        Click="Add_Click"
                        Style="{StaticResource ToolbarButton}"/>
                <Button Content="Smazat vybrané"
                        Click="Delete_Click"
                        Style="{StaticResource ToolbarButton}"/>
                <Button Content="Uložit"
                        Click="Save_Click"
                        Style="{StaticResource ToolbarButton}"/>
            </StackPanel>
        </DockPanel>

        <!-- karta s tabulkou -->
        <Border Grid.Row="1"
                Background="White"
                CornerRadius="10"
                BorderBrush="#E5E7EB"
                BorderThickness="1">
            <DataGrid x:Name="SuppliersGrid"
                      ItemsSource="{Binding Suppliers}"
                      AutoGenerateColumns="False"
                      CanUserAddRows="True"
                      CanUserDeleteRows="True"
                      IsReadOnly="False"
                      GridLinesVisibility="None"
                      RowEditEnding="SuppliersGrid_RowEditEnding"
                      RowBackground="White"
                      AlternatingRowBackground="#FAFAFA"
                      HeadersVisibility="Column"
                      BorderThickness="0"
                      Margin="0">

                <!-- sloupce -->
                <DataGrid.Columns>
                    <DataGridTextColumn Header="Název"
                                        Binding="{Binding Name, UpdateSourceTrigger=PropertyChanged}"
                                        Width="2*"
                                        MinWidth="160"/>
                    <DataGridTextColumn Header="Ulice a č.p."
                                        Binding="{Binding Address, UpdateSourceTrigger=PropertyChanged}"
                                        Width="2*"
                                        MinWidth="160"/>
                    <DataGridTextColumn Header="Město"
                                        Binding="{Binding City, UpdateSourceTrigger=PropertyChanged}"
                                        Width="*"
                                        MinWidth="120"/>
                    <DataGridTextColumn Header="PSČ"
                                        Binding="{Binding PostalCode, UpdateSourceTrigger=PropertyChanged}"
                                        Width="90"/>

                    <DataGridTextColumn Header="IČO"
                                        Binding="{Binding ICO, UpdateSourceTrigger=PropertyChanged}"
                                        Width="110"/>
                    <DataGridTextColumn Header="DIČ"
                                        Binding="{Binding DIC, UpdateSourceTrigger=PropertyChanged}"
                                        Width="130"/>

                    <!-- Banka: hezký combo Název (kód) -->
                    <DataGridTemplateColumn Header="Banka"
                                            Width="170"
                                            MinWidth="150">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock>
                                    <Run Text="{Binding Bank}"/>
                                </TextBlock>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                        <DataGridTemplateColumn.CellEditingTemplate>
                            <DataTemplate>
                                <ComboBox IsEditable="True"
                                          ItemsSource="{Binding DataContext.Banks, RelativeSource={RelativeSource AncestorType=UserControl}}"
                                          SelectedValuePath="Name"
                                          SelectedValue="{Binding Bank, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}">
                                    <ComboBox.ItemTemplate>
                                        <DataTemplate>
                                            <TextBlock>
                                                <Run Text="{Binding Name}"/>
                                                <Run Text=" ("/>
                                                <Run Text="{Binding Code}"/>
                                                <Run Text=")"/>
                                            </TextBlock>
                                        </DataTemplate>
                                    </ComboBox.ItemTemplate>
                                </ComboBox>
                            </DataTemplate>
                        </DataGridTemplateColumn.CellEditingTemplate>
                    </DataGridTemplateColumn>

                    <DataGridTextColumn Header="Účet"
                                        Binding="{Binding AccountNumber, UpdateSourceTrigger=PropertyChanged}"
                                        Width="150"/>
                    <DataGridTextColumn Header="IBAN"
                                        Binding="{Binding IBAN, UpdateSourceTrigger=PropertyChanged}"
                                        Width="2*"
                                        MinWidth="180"/>
                    <DataGridTextColumn Header="E-mail"
                                        Binding="{Binding Email, UpdateSourceTrigger=PropertyChanged}"
                                        Width="1.5*"
                                        MinWidth="160"/>
                    <DataGridTextColumn Header="Telefon"
                                        Binding="{Binding Phone, UpdateSourceTrigger=PropertyChanged}"
                                        Width="140"/>
                    <DataGridCheckBoxColumn Header="Plátce DPH"
                                            Binding="{Binding IsVatPayer, Mode=TwoWay}"
                                            Width="110"/>
                </DataGrid.Columns>
            </DataGrid>
        </Border>
    </Grid>
</UserControl>
